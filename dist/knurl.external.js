var V={},de={layout:"row",visible:!0},d=(n,t,r={})=>{V[n]={...de,...r,component:t}},P=n=>n in V?!0:(console.warn(`control of type "${n}" is requested but not registered`),!1),$=n=>{if(!P(n.type))return;let{component:t,...r}=V[n.type];return r},q=n=>{if(!P(n.type))return;let{component:t,...r}=V[n.type];return t};import{jsx as he}from"preact/jsx-runtime";var me=({nodes:n,treeNode:t,update:r})=>{let e=n[t.id];return he("button",{type:"button",onClick:()=>r({[e.id]:{value:!0}},{event:!0}),children:e.text??e.id})};d("button",me,{label:null});import{useState as O,useEffect as ge}from"preact/hooks";var U=n=>n.trim()==="",W=n=>isFinite(n),fe=(n,t)=>String(n)!==t,ke=(n,t,r)=>n>=t&&n<=r,ve=(n,t,r)=>Math.min(Math.max(n,t),r),N=({value:n,min:t=-1/0,max:r=1/0,commit:e})=>{let[o,l]=O(String(n)),[i,s]=O(n);ge(()=>{l(String(n)),s(n)},[n]);function u(a){let h=String(a);if(l(h),U(h))return;let m=Number(h);!W(m)||!ke(m,t,r)||fe(m,h)||(s(m),e(m))}function c(){if(U(o)||!W(Number(o))){l(String(i));return}let a=Number(o),h=ve(a,t,r);l(String(h)),s(h),e(h)}return{value:n,text:o,setValue:u,handleBlur:c}},C=n=>Array.isArray(n)&&n.every(t=>t!=null&&typeof t=="object"&&!Array.isArray(t)&&"label"in t&&"value"in t)?n:Array.isArray(n)?n.map(t=>({label:String(t),value:t})):n&&typeof n=="object"?Object.entries(n).map(([t,r])=>({label:t,value:r})):[];import{jsx as G}from"preact/jsx-runtime";var be=({nodes:n,treeNode:t,update:r})=>{let e=n[t.id],o=C(e.options).map(({label:l,value:i},s)=>{let u=e.value===i?"knurl-selected":"";return G("button",{onClick:()=>r({[e.id]:{value:i}}),className:`${u}`,type:"button",children:l},l)});return G("div",{className:"knurl-buttons",children:o})};d("buttons",be,{value:n=>C(n.options)[0]?.value});import{useState as _,useEffect as xe}from"preact/hooks";import{Fragment as Se,jsx as H,jsxs as Ne}from"preact/jsx-runtime";var ye=n=>"#ffffff",we=({nodes:n,treeNode:t,update:r})=>{let e=n[t.id],[o,l]=_(e.value),[i,s]=_(e.value);xe(()=>{l(e.value)},[e.value]);let u=h=>h.startsWith("#")&&h.length===7&&CSS.supports("color",h),c=h=>{let m=h.currentTarget.value,f=u(m)?m:i;r({[e.id]:{value:f}}),l(f)},a=h=>{let m=h.currentTarget.value;u(m)&&(r({[e.id]:{value:m}}),s(m))};return Ne(Se,{children:[H("input",{type:"color",value:o,onInput:a,className:"knurl-color-picker"}),H("input",{type:"text",className:"knurl-fixed",size:"7",value:o,onInput:a,onChange:c})]})};d("color",we,{value:ye});import{jsx as E}from"preact/jsx-runtime";var Ce=({nodes:n,treeNode:t,update:r})=>{let e=n[t.id];switch(e.format){case"monospace":return E("span",{className:"knurl-display knurl-monospace",children:e.value});case"block":return E("pre",{className:"knurl-display knurl-monospace",children:e.value});case"html":return E("span",{className:"knurl-display",dangerouslySetInnerHTML:{__html:e.value??""}});default:return E("span",{className:"knurl-display",children:e.value})}};d("display",Ce,{value:"",format:"text"});import{useRef as Xe,useState as J,useEffect as K}from"preact/hooks";import{jsx as ze}from"preact/jsx-runtime";var Ye=({nodes:n,treeNode:t,update:r})=>{let e=n[t.id],o=Xe(null),[l,i]=J(Array(e.samples).fill(0)),[s,u]=J({min:null,max:null});return K(()=>{i(c=>[...c,e.value].slice(-e.samples)),u(c=>({min:c.min===null?e.value:Math.min(c.min,e.value),max:c.max===null?e.value:Math.max(c.max,e.value)}))},[e]),K(()=>{let c=o.current;if(!c)return;let a=c.getContext("2d"),h=c.getBoundingClientRect(),m=window.devicePixelRatio||1,f=h.width,k=e.height;c.width=f*m,c.height=k*m,a.scale(m,m),c.style.width=f+"px",c.style.height=k+"px",a.clearRect(0,0,f,k);let p=c.closest(".knurl"),b=getComputedStyle(p).getPropertyValue("--panel-fg").trim()||"#aaa",x=e.min??s.min??0,v=e.max??s.max??1,w=v-x||1,S=1/(e.samples-1)*f;a.fillStyle=b,a.globalAlpha=.5,a.beginPath(),a.moveTo(0,k),l.forEach((Y,z)=>{let I=(Y-x)/w*k,L=z*S,B=k-I;a.lineTo(L,B)}),a.lineTo(f,k),a.fill(),a.globalAlpha=1,a.font="10px ui-monospace, monospace",a.textBaseline="top",a.textAlign="left",a.fillText(v,3,0),a.textBaseline="bottom",a.fillText(x,3,k)},[l,s,e]),ze("canvas",{className:"knurl-graph",ref:o,height:e.height})};d("graph",Ye,{height:60,samples:60});import"preact/hooks";import{jsx as M,jsxs as Te}from"preact/jsx-runtime";var A=({nodes:n,treeNode:t,update:r})=>{let e=n[t.id];if(!e.visible)return null;let o=q(e);if(!o)return null;let l=M(o,{nodes:n,treeNode:t,update:r});if(e.layout==="block")return l;let i=!(e.label===""||e.label===null);return Te("div",{className:"knurl-row",role:"group","aria-label":e.label??e.id,children:[i&&M("span",{className:"knurl-label",children:e.label??e.id}),M("div",{className:"knurl-control",children:l})]})};import{jsx as R,jsxs as Q}from"preact/jsx-runtime";var Ve=({nodes:n,treeNode:t,update:r})=>{let e=n[t.id],o=t.nodes.map((u,c)=>R(A,{nodes:n,treeNode:u,update:r},u.id)),l=e.expanded?"knurl-expanded":"knurl-collapsed",i=e.showLabel?"knurl-show-label":"knurl-hide-label",s=!(e.label===""||e.label===null);return Q("div",{className:`knurl-group ${l} ${i}`,children:[s&&Q("span",{className:"knurl-label",onClick:()=>{e.expandable&&r({[e.id]:{expanded:!e.expanded}})},children:[e.expandable&&R("span",{className:"knurl-icon",children:"\u2303"}),e.label??e.id]}),R("div",{className:"knurl-group-container",children:o})]})};d("group",Ve,{layout:"block",expandable:!0,expanded:!0});import{jsx as Ae}from"preact/jsx-runtime";var Ee=({nodes:n,treeNode:t,update:r})=>{let e=n[t.id],{text:o,setValue:l,handleBlur:i}=N({value:e.value,min:e.min,max:e.max,commit:s=>r({[e.id]:{value:s}})});return Ae("input",{className:"knurl-number-input",type:"text",value:o,onInput:s=>l(s.currentTarget.value),onChange:i})};d("number",Ee,{value:()=>0});import{useState as D,useEffect as Z}from"preact/hooks";import{Fragment as Le,jsx as y,jsxs as X}from"preact/jsx-runtime";var j=(n,t)=>{let r=1/t;return Math.round(n*r)/r},Ie=({nodes:n,treeNode:t,update:r})=>{let e=n[t.id],{x:o,y:l}=e.value,[i,s]=D(!1),[u,c]=D(null),[a,h]=D({height:176,width:176,space:6,radius:2});Z(()=>{let p=document.querySelector(".knurl");if(!p)return;let g=getComputedStyle(p),b=g.getPropertyValue("--panel-width"),x=g.getPropertyValue("--label-width"),v=g.getPropertyValue("--panel-radius"),w=g.getPropertyValue("--panel-space"),S=parseFloat(b)-parseFloat(x)-2*parseFloat(w),Y=parseFloat(v),z=parseFloat(w);h({width:S,height:S,radius:Y,space:z})},[]);let m=N({value:e.value.x,min:e.minX,max:e.maxX,commit:p=>r({[e.id]:{value:{...e.value,x:p}}})}),f=N({value:e.value.y,min:e.minY,max:e.maxY,commit:p=>r({[e.id]:{value:{...e.value,y:p}}})});Z(()=>{if(!i||!u)return;let p=document.body.style.cursor;document.body.style.cursor="grabbing";let g=v=>{let w=v.clientX??v.touches?.[0]?.clientX,S=v.clientY??v.touches?.[0]?.clientY;if(w===void 0||S===void 0)return;let Y=w-u.pointerX,z=S-u.pointerY,I=u.valueX+Y*e.scale,L=u.valueY+z*e.scale,B=Math.max(e.minX,Math.min(e.maxX,I)),ue=Math.max(e.minY,Math.min(e.maxY,L)),ce=j(B,e.step),pe=j(ue,e.step);r({[e.id]:{value:{x:ce,y:pe}}})},b=()=>{s(!1),c(null)},x=v=>(v.preventDefault(),!1);return document.addEventListener("mousemove",g),document.addEventListener("mouseup",b),document.addEventListener("touchmove",g,{passive:!1}),document.addEventListener("touchend",b),()=>{document.body.style.cursor=p,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",b),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",b)}},[i,u,e]);let k=(p,g=null)=>{let b=p.clientX??p.touches?.[0]?.clientX,x=p.clientY??p.touches?.[0]?.clientY;s(!0),c({pointerX:b,pointerY:x,valueX:g?.x??e.value.x,valueY:g?.y??e.value.y})};return X(Le,{children:[y("button",{onMouseDown:p=>{p.preventDefault(),k(p)},onTouchStart:p=>{p.preventDefault(),k(p)},className:`knurl-translate ${i?"knurl-selected":""}`,type:"button",style:{touchAction:"none",userSelect:"none"},children:"\u2316"}),y("input",{className:"knurl-number-input knurl-fixed",type:"text",size:"7",value:m.text,onInput:p=>m.setValue(p.currentTarget.value),onChange:m.handleBlur}),y("input",{className:"knurl-number-input knurl-fixed",type:"text",size:"7",value:f.text,onInput:p=>f.setValue(p.currentTarget.value),onChange:f.handleBlur}),i&&y("div",{className:"knurl-pad2",children:X("svg",{width:a.width,height:a.height,style:{position:"absolute",top:0,left:0,borderRadius:a.radius},children:[y("rect",{width:a.width,height:a.height,fill:"transparent",className:"knurl-border",rx:a.radius}),y("line",{x1:a.width/2,y1:0,x2:a.width/2,y2:a.height,className:"knurl-grid"}),y("line",{x1:0,y1:a.height/2,x2:a.width,y2:a.height/2,className:"knurl-grid"}),X("text",{x:a.space,y:a.space,className:"knurl-label","dominant-baseline":"hanging","font-size":"10",children:[e.minX,",",e.minY]}),X("text",{x:a.width-a.space,y:a.space,"dominant-baseline":"hanging",className:"knurl-label","font-size":"10","text-anchor":"end",children:[e.maxX,",",e.minY]}),X("text",{x:a.space,y:a.height-a.space,className:"knurl-label","font-size":"10",children:[e.minX,",",e.maxY]}),X("text",{x:a.width-a.space,y:a.height-a.space,className:"knurl-label","font-size":"10","text-anchor":"end",children:[e.maxX,",",e.maxY]}),y("circle",{cx:(o-e.minX)/(e.maxX-e.minX)*a.width,cy:(l-e.minY)/(e.maxY-e.minY)*a.height,r:6,className:"knurl-indicator"})]})})]})};d("pad2",Ie,{value:n=>({x:n.minX+(n.maxX-n.minX)*.5,y:n.minY+(n.maxY-n.minY)*.5}),scale:.01,step:.01,minX:-1,maxX:1,minY:-1,maxY:1});import{Fragment as Me,jsx as ee,jsxs as Re}from"preact/jsx-runtime";var Be=({nodes:n,treeNode:t,update:r})=>{let e=n[t.id],{text:o,setValue:l,handleBlur:i}=N({value:e.value,min:e.min,max:e.max,commit:s=>r({[e.id]:{value:s}})});return Re(Me,{children:[ee("input",{type:"range",value:o,min:e.min,max:e.max,step:e.step??1,onInput:s=>l(s.currentTarget.value)}),ee("input",{type:"text",size:"7",className:"knurl-number-input knurl-fixed",value:o,onInput:s=>l(s.currentTarget.value),onChange:i})]})};d("range",Be,{value:n=>n.min??0});import{jsx as ne}from"preact/jsx-runtime";var De=({nodes:n,treeNode:t,update:r})=>{let e=n[t.id],o=C(e.options),l=u=>{let c=Number(u.currentTarget.value),a=o[c].value;r({[e.id]:{value:a}})},i=o.map(({label:u},c)=>ne("option",{value:c,children:u},u)),s=o.findIndex(({value:u})=>u===e.value);return ne("select",{value:s<0?"":s,onChange:l,children:i})};d("select",De,{value:n=>C(n.options)[0]?.value});import{jsx as te}from"preact/jsx-runtime";var Fe=({nodes:n,treeNode:t,update:r})=>{let e=n[t.id],o=l=>{r({[e.id]:{value:l.currentTarget.value}})};return e.multiline?te("textarea",{value:e.value,onInput:o,rows:e.rows}):te("input",{type:"text",value:e.value,onInput:o})};d("text",Fe,{value:"",multiline:!1,rows:4});import{jsx as $e}from"preact/jsx-runtime";var Pe=({nodes:n,treeNode:t,update:r})=>{let e=n[t.id];return $e("input",{type:"checkbox",checked:e.value,onInput:o=>r({[e.id]:{value:o.currentTarget.checked}})})};d("toggle",Pe,{value:n=>!1});import{render as le}from"preact";var re='.knurl-container{position:fixed;top:0;right:0}.knurl{--panel-bg: hsl(230 7% 10%);--panel-fg: hsl(230 10% 75%);--panel-border: hsl(230 9% 18%);--panel-hover: hsl(230 9% 26%);--panel-pressed: hsl(230 7% 16%);--panel-low-emphasis: hsl(230 4% 55%);--panel-focus: var(--panel-fg);--panel-selection-fg: var(--panel-bg);--panel-selection-bg: var(--panel-fg);--value-number: hsl(220 80% 65%);--value-string: hsl(139 45% 56%);--panel-space: 4px;--panel-radius: 2px;--panel-width: 256px;--label-width: 80px;--row-height: 20px;--font-ui: system-ui, -apple-system, sans-serif;--font-value: ui-monospace, monospace;--font-size-normal: 11px;--line-height-normal: 1.4;--color-link: var(--value-number);--panel-tween-func: cubic-bezier(.25, .8, .5, 1);--panel-tween-duration: .2s;--checkbox-check-width: 3px;--checkbox-check-height: 9px;width:var(--panel-width);color:var(--panel-fg);font-family:var(--font-ui);font-size:var(--font-size-normal);line-height:var(--line-height-normal);box-sizing:border-box;font-variant-numeric:tabular-nums}.knurl .knurl-row{display:flex;flex-direction:row;gap:var(--panel-space);padding:var(--panel-space) var(--panel-space)}.knurl .knurl-row+.knurl-row{padding-top:calc(var(--panel-space) * .5)}.knurl .knurl-row:has(+.knurl-row){padding-bottom:calc(var(--panel-space) * .5)}.knurl .knurl-group-container .knurl-group-container{border-bottom:1px solid var(--panel-border)}.knurl .knurl-row .knurl-label{display:flex;align-self:flex-start;align-items:center;line-height:1.2;min-height:20px;min-width:0;user-select:none;color:var(--panel-low-emphasis);flex:0 0 var(--label-width)}.knurl .knurl-group{display:flex;flex-direction:column;background:var(--panel-bg);border-radius:var(--panel-radius)}.knurl-container>.knurl>.knurl-group>.knurl-label{border-radius:0 0 var(--panel-radius) var(--panel-radius)}.knurl .knurl-group>.knurl-label{display:flex;align-items:center;user-select:none;background:var(--panel-border);border-radius:var(--panel-radius);height:var(--row-height);padding-left:var(--panel-space);gap:var(--panel-space)}.knurl .knurl-group>.knurl-label:has(>.knurl-icon){cursor:pointer}.knurl .knurl-group>.knurl-label>.knurl-icon{font-weight:700;font-size:10px;cursor:pointer}@media (prefers-reduced-motion: no-preference){.knurl .knurl-group>.knurl-label>.knurl-icon{transition:transform var(--panel-tween-duration) var(--panel-tween-func)}}.knurl .knurl-group.knurl-expanded>.knurl-label>.knurl-icon{transform:rotate(180deg)}.knurl .knurl-group>.knurl-group-container{flex-direction:column;overflow:hidden;display:none}.knurl .knurl-group.knurl-expanded>.knurl-group-container{display:flex}@supports (interpolate-size: allow-keywords){.knurl .knurl-group>.knurl-group-container{display:flex;interpolate-size:allow-keywords;height:0;opacity:0}@media (prefers-reduced-motion: no-preference){.knurl .knurl-group>.knurl-group-container{transition:height var(--panel-tween-duration) var(--panel-tween-func),padding var(--panel-tween-duration) var(--panel-tween-func),opacity var(--panel-tween-duration) var(--panel-tween-func)}}.knurl .knurl-group.knurl-expanded>.knurl-group-container{height:auto;opacity:1}}.knurl-container>.knurl{border-radius:0 0 var(--panel-radius) var(--panel-radius)}.knurl .knurl-row .knurl-control{flex:1 1 auto;display:flex;justify-content:flex-start;align-items:center;min-height:var(--row-height);gap:var(--panel-space)}.knurl button,.knurl input,.knurl select,.knurl textarea{font-size:inherit;font-family:inherit;width:100%;box-sizing:border-box;border:1px solid transparent;padding:0 var(--panel-space);border-radius:var(--panel-radius);background:var(--panel-border);color:var(--panel-fg)}.knurl button,.knurl select,.knurl input[type=text],.knurl input[type=range]{min-height:var(--row-height)}.knurl input[type=color]{height:var(--row-height)}.knurl button,.knurl select,.knurl input[type=checkbox],.knurl input[type=range],.knurl input[type=color]{cursor:pointer}.knurl input[type=text],.knurl textarea{cursor:text}.knurl button:focus-visible,.knurl select:focus-visible,.knurl input:focus-visible,.knurl textarea:focus-visible{outline:2px solid var(--panel-focus);outline-offset:0px}.knurl button:focus:not(:focus-visible),.knurl select:focus:not(:focus-visible),.knurl input:focus:not(:focus-visible),.knurl textarea:focus:not(:focus-visible){outline:none}.knurl button:hover:not(:active):not(.knurl-selected),.knurl input:hover,.knurl select:hover,.knurl textarea:hover{background:var(--panel-hover)}.knurl button:active,.knurl button.knurl-selected{background:var(--panel-fg);color:var(--panel-bg);border-radius:var(--panel-radius)}.knurl input::selection,.knurl textarea::selection{background:var(--panel-selection-bg);color:var(--panel-selection-fg)}.knurl textarea{resize:vertical;min-height:calc(var(--row-height) * 2 + var(--panel-space));line-height:var(--line-height-normal);color:var(--value-string);font-family:var(--font-value)}.knurl .knurl-buttons{display:flex;flex-direction:row;flex:1;gap:var(--panel-space)}.knurl .knurl-pad2{position:absolute;align-self:flex-start;margin-top:calc(var(--row-height) + var(--panel-space));width:calc(var(--panel-width) - var(--label-width) - 2 * var(--panel-space));height:calc(var(--panel-width) - var(--label-width) - 2 * var(--panel-space));background:var(--panel-bg);z-index:1001}.knurl .knurl-pad2 .knurl-border,.knurl .knurl-pad2 .knurl-grid{stroke:var(--panel-fg);stroke-opacity:.25}.knurl .knurl-pad2 .knurl-label{fill:var(--panel-fg);opacity:.5}.knurl .knurl-pad2 .knurl-indicator{fill:var(--panel-fg)}.knurl button.knurl-translate{font-weight:bolder}.knurl button.knurl-translate.knurl-selected{cursor:grabbing}.knurl input[type=text]{color:var(--value-string);font-family:var(--font-value)}.knurl input[type=text].knurl-number-input{color:var(--value-number)}.knurl input[type=number]::-webkit-inner-spin-button,.knurl input[type=number]::-webkit-outer-spin-button{appearance:none;margin:0}.knurl input[type=text].knurl-fixed{width:60px}.knurl .knurl-control>.knurl-display{line-height:var(--row-height)}.knurl .knurl-control>.knurl-display.knurl-monospace{font-family:var(--font-value)}.knurl .knurl-display a{color:var(--color-link);text-decoration:underline}.knurl .knurl-display a:hover{text-decoration:none}.knurl pre.knurl-display{margin:0}.knurl input[type=checkbox]{margin:0;appearance:none;border-radius:var(--panel-radius);width:14px;height:14px;text-align:center}.knurl input[type=checkbox]:checked:before{content:"";display:flex;height:var(--checkbox-check-height);width:var(--checkbox-check-width);border-bottom:2px solid var(--panel-fg);border-right:2px solid var(--panel-fg);transform:rotate(45deg)}.knurl input[type=range]{-webkit-appearance:none;appearance:none;background:transparent;margin:0;padding:0}.knurl input[type=range]::-webkit-slider-runnable-track{background:var(--panel-border);height:3px;border-radius:2px;margin:0 -1px}.knurl input[type=range]::-moz-range-track{background:var(--panel-border);height:3px;border-radius:2px;margin:0 -1px}.knurl input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;border-radius:var(--panel-radius);background:var(--panel-fg);margin-top:-4px}.knurl input[type=range]::-moz-range-thumb{width:12px;height:12px;border-radius:var(--panel-radius);background:var(--panel-fg);border:none}.knurl input[type=color]{-webkit-appearance:none;border:1px solid var(--panel-border);padding:0;border-radius:var(--panel-radius);height:var(--row-height)}.knurl input[type=color]::-webkit-color-swatch-wrapper{padding:0}.knurl input[type=color]::-webkit-color-swatch{border:0}.knurl canvas.knurl-graph{width:100%}';var Oe=0,Ue=n=>`node ${Oe++}`,F=n=>{let{id:t=Ue(),nodes:r=[],...e}=n,o={},l={id:t,nodes:[]},i={id:t},s=$(n);for(let u in s)typeof s[u]=="function"?i[u]=s[u]({...s,...n}):i[u]=s[u];return Object.assign(i,e),o[t]=i,r.length>0&&r.forEach(u=>{let[c,a]=F(u);Object.assign(o,c),l.nodes.push(a)}),[o,l]},oe=()=>{let n=document.createElement("div");return n.classList.add("knurl-container"),document.body.append(n),n},ae=()=>{if(!document.querySelector("style[data-knurl]")){let n=document.createElement("style");n.textContent=re,n.setAttribute("data-knurl","true"),document.head.appendChild(n)}};import{jsx as se}from"preact/jsx-runtime";var ie=Symbol("all"),T=class{constructor(t,r){let[e,o]=F(t);this.nodes=e,this.root=o,this.container=r.mount??oe(),this.options=r,this.subscribers=new Map,this.raf=null,r.injectStyles&&ae(),this.render()}render(){let t=()=>{le(se("div",{className:`knurl ${this.options.classNames.join(" ")}`,children:se(A,{nodes:this.nodes,treeNode:this.root,update:this.handleUpdate.bind(this)})}),this.container)};if(!this.options.throttleRendering){t();return}this.options.throttleRendering&&!this.raf&&(this.raf=requestAnimationFrame(()=>{t(),this.raf=null}))}handleUpdate(t,{silent:r=!1,event:e=!1}={}){if(typeof t!="object"){console.warn("could not set values: invalid values object");return}for(let o in t){let l=this.nodes[o];if(!l)continue;let i=t[o];e||(this.nodes[o]={...l,...i}),"value"in i&&!r&&this.notifySubscribers(o,t[o].value)}this.render()}notifySubscribers(t,r){this.subscribers.get(t)?.forEach(e=>e(r)),this.subscribers.get(ie)?.forEach(e=>e(t,r))}subscribe(t,r){let e=typeof t=="string"?t:ie,o=typeof r=="function"?r:typeof t=="function"?t:void 0;if(o===void 0){console.warn("could not subscribe: no handler");return}return this.subscribers.has(e)||this.subscribers.set(e,[]),this.subscribers.get(e).push(o),()=>{let l=this.subscribers.get(e),i=l.indexOf(o);i>-1?l.splice(i,1):console.warn("could not unsubscribe: could not find handler")}}set(t,r){let e={};for(let o in t)e[o]={value:t[o]};this.handleUpdate(e,r)}update(t,r){this.handleUpdate(t,{...r,event:!1})}get(){let t={};for(let r in this.nodes){let o=this.nodes[r]?.value;o!==void 0&&(t[r]=o)}return t}destroy(){this.raf&&cancelAnimationFrame(this.raf),le(null,this.container),this.options.mount||this.container.remove(),this.subscribers.clear(),this.values={}}};var ut={create(n,t={}){let r=Array.isArray(n)?{type:"group",label:"controls",nodes:n}:n,e=new T(r,{throttleRendering:!0,injectStyles:!0,classNames:[],...t});return{subscribe:e.subscribe.bind(e),update:e.update.bind(e),set:e.set.bind(e),get:e.get.bind(e),destroy:e.destroy.bind(e)}}};export{ut as default,d as register};
