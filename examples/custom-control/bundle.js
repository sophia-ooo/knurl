var O,b,he,Je,U,pe,me,ve,ge,re,te,ne,Ge,B={},ke=[],Ke=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function F(e,t){for(var r in t)e[r]=t[r];return e}function ae(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ze(e,t,r){var n,l,a,u={};for(a in t)a=="key"?n=t[a]:a=="ref"?l=t[a]:u[a]=t[a];if(arguments.length>2&&(u.children=arguments.length>3?O.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)u[a]===void 0&&(u[a]=e.defaultProps[a]);return $(e,u,n,l,null)}function $(e,t,r,n,l){var a={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:l??++he,__i:-1,__u:0};return l==null&&b.vnode!=null&&b.vnode(a),a}function T(e){return e.children}function W(e,t){this.props=e,this.context=t}function Y(e,t){if(t==null)return e.__?Y(e.__,e.__i+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Y(e):null}function be(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return be(e)}}function _e(e){(!e.__d&&(e.__d=!0)&&U.push(e)&&!q.__r++||pe!=b.debounceRendering)&&((pe=b.debounceRendering)||me)(q)}function q(){for(var e,t,r,n,l,a,u,i=1;U.length;)U.length>i&&U.sort(ve),e=U.shift(),i=U.length,e.__d&&(r=void 0,l=(n=(t=e).__v).__e,a=[],u=[],t.__P&&((r=F({},n)).__v=n.__v+1,b.vnode&&b.vnode(r),le(t.__P,r,n,t.__n,t.__P.namespaceURI,32&n.__u?[l]:null,a,l??Y(n),!!(32&n.__u),u),r.__v=n.__v,r.__.__k[r.__i]=r,we(a,r,u),r.__e!=l&&be(r)));q.__r=0}function xe(e,t,r,n,l,a,u,i,c,s,p){var o,d,f,k,m,g,h=n&&n.__k||ke,v=t.length;for(c=Qe(r,t,h,c,v),o=0;o<v;o++)(f=r.__k[o])!=null&&(d=f.__i==-1?B:h[f.__i]||B,f.__i=o,g=le(e,f,d,l,a,u,i,c,s,p),k=f.__e,f.ref&&d.ref!=f.ref&&(d.ref&&oe(d.ref,null,f),p.push(f.ref,f.__c||k,f)),m==null&&k!=null&&(m=k),4&f.__u||d.__k===f.__k?c=ye(f,c,e):typeof f.type=="function"&&g!==void 0?c=g:k&&(c=k.nextSibling),f.__u&=-7);return r.__e=m,c}function Qe(e,t,r,n,l){var a,u,i,c,s,p=r.length,o=p,d=0;for(e.__k=new Array(l),a=0;a<l;a++)(u=t[a])!=null&&typeof u!="boolean"&&typeof u!="function"?(c=a+d,(u=e.__k[a]=typeof u=="string"||typeof u=="number"||typeof u=="bigint"||u.constructor==String?$(null,u,null,null,null):J(u)?$(T,{children:u},null,null,null):u.constructor==null&&u.__b>0?$(u.type,u.props,u.key,u.ref?u.ref:null,u.__v):u).__=e,u.__b=e.__b+1,i=null,(s=u.__i=et(u,r,c,o))!=-1&&(o--,(i=r[s])&&(i.__u|=2)),i==null||i.__v==null?(s==-1&&(l>p?d--:l<p&&d++),typeof u.type!="function"&&(u.__u|=4)):s!=c&&(s==c-1?d--:s==c+1?d++:(s>c?d--:d++,u.__u|=4))):e.__k[a]=null;if(o)for(a=0;a<p;a++)(i=r[a])!=null&&(2&i.__u)==0&&(i.__e==n&&(n=Y(i)),Ce(i,i));return n}function ye(e,t,r){var n,l;if(typeof e.type=="function"){for(n=e.__k,l=0;n&&l<n.length;l++)n[l]&&(n[l].__=e,t=ye(n[l],t,r));return t}e.__e!=t&&(t&&e.type&&!r.contains(t)&&(t=Y(e)),r.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function et(e,t,r,n){var l,a,u=e.key,i=e.type,c=t[r];if(c===null&&e.key==null||c&&u==c.key&&i==c.type&&(2&c.__u)==0)return r;if(n>(c!=null&&(2&c.__u)==0?1:0))for(l=r-1,a=r+1;l>=0||a<t.length;){if(l>=0){if((c=t[l])&&(2&c.__u)==0&&u==c.key&&i==c.type)return l;l--}if(a<t.length){if((c=t[a])&&(2&c.__u)==0&&u==c.key&&i==c.type)return a;a++}}return-1}function de(e,t,r){t[0]=="-"?e.setProperty(t,r??""):e[t]=r==null?"":typeof r!="number"||Ke.test(t)?r:r+"px"}function V(e,t,r,n,l){var a,u;e:if(t=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||de(e.style,t,"");if(r)for(t in r)n&&r[t]==n[t]||de(e.style,t,r[t])}else if(t[0]=="o"&&t[1]=="n")a=t!=(t=t.replace(ge,"$1")),u=t.toLowerCase(),t=u in e||t=="onFocusOut"||t=="onFocusIn"?u.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+a]=r,r?n?r.u=n.u:(r.u=re,e.addEventListener(t,a?ne:te,a)):e.removeEventListener(t,a?ne:te,a);else{if(l=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&r==1?"":r))}}function fe(e){return function(t){if(this.l){var r=this.l[t.type+e];if(t.t==null)t.t=re++;else if(t.t<r.u)return;return r(b.event?b.event(t):t)}}}function le(e,t,r,n,l,a,u,i,c,s){var p,o,d,f,k,m,g,h,v,w,N,j,A,z,L,M,X,E=t.type;if(t.constructor!=null)return null;128&r.__u&&(c=!!(32&r.__u),a=[i=t.__e=r.__e]),(p=b.__b)&&p(t);e:if(typeof E=="function")try{if(h=t.props,v="prototype"in E&&E.prototype.render,w=(p=E.contextType)&&n[p.__c],N=p?w?w.props.value:p.__:n,r.__c?g=(o=t.__c=r.__c).__=o.__E:(v?t.__c=o=new E(h,N):(t.__c=o=new W(h,N),o.constructor=E,o.render=nt),w&&w.sub(o),o.props=h,o.state||(o.state={}),o.context=N,o.__n=n,d=o.__d=!0,o.__h=[],o._sb=[]),v&&o.__s==null&&(o.__s=o.state),v&&E.getDerivedStateFromProps!=null&&(o.__s==o.state&&(o.__s=F({},o.__s)),F(o.__s,E.getDerivedStateFromProps(h,o.__s))),f=o.props,k=o.state,o.__v=t,d)v&&E.getDerivedStateFromProps==null&&o.componentWillMount!=null&&o.componentWillMount(),v&&o.componentDidMount!=null&&o.__h.push(o.componentDidMount);else{if(v&&E.getDerivedStateFromProps==null&&h!==f&&o.componentWillReceiveProps!=null&&o.componentWillReceiveProps(h,N),!o.__e&&o.shouldComponentUpdate!=null&&o.shouldComponentUpdate(h,o.__s,N)===!1||t.__v==r.__v){for(t.__v!=r.__v&&(o.props=h,o.state=o.__s,o.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.some(function(I){I&&(I.__=t)}),j=0;j<o._sb.length;j++)o.__h.push(o._sb[j]);o._sb=[],o.__h.length&&u.push(o);break e}o.componentWillUpdate!=null&&o.componentWillUpdate(h,o.__s,N),v&&o.componentDidUpdate!=null&&o.__h.push(function(){o.componentDidUpdate(f,k,m)})}if(o.context=N,o.props=h,o.__P=e,o.__e=!1,A=b.__r,z=0,v){for(o.state=o.__s,o.__d=!1,A&&A(t),p=o.render(o.props,o.state,o.context),L=0;L<o._sb.length;L++)o.__h.push(o._sb[L]);o._sb=[]}else do o.__d=!1,A&&A(t),p=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++z<25);o.state=o.__s,o.getChildContext!=null&&(n=F(F({},n),o.getChildContext())),v&&!d&&o.getSnapshotBeforeUpdate!=null&&(m=o.getSnapshotBeforeUpdate(f,k)),M=p,p!=null&&p.type===T&&p.key==null&&(M=Ne(p.props.children)),i=xe(e,J(M)?M:[M],t,r,n,l,a,u,i,c,s),o.base=t.__e,t.__u&=-161,o.__h.length&&u.push(o),g&&(o.__E=o.__=null)}catch(I){if(t.__v=null,c||a!=null)if(I.then){for(t.__u|=c?160:128;i&&i.nodeType==8&&i.nextSibling;)i=i.nextSibling;a[a.indexOf(i)]=null,t.__e=i}else for(X=a.length;X--;)ae(a[X]);else t.__e=r.__e,t.__k=r.__k;b.__e(I,t,r)}else a==null&&t.__v==r.__v?(t.__k=r.__k,t.__e=r.__e):i=t.__e=tt(r.__e,t,r,n,l,a,u,c,s);return(p=b.diffed)&&p(t),128&t.__u?void 0:i}function we(e,t,r){for(var n=0;n<r.length;n++)oe(r[n],r[++n],r[++n]);b.__c&&b.__c(t,e),e.some(function(l){try{e=l.__h,l.__h=[],e.some(function(a){a.call(l)})}catch(a){b.__e(a,l.__v)}})}function Ne(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:J(e)?e.map(Ne):F({},e)}function tt(e,t,r,n,l,a,u,i,c){var s,p,o,d,f,k,m,g=r.props,h=t.props,v=t.type;if(v=="svg"?l="http://www.w3.org/2000/svg":v=="math"?l="http://www.w3.org/1998/Math/MathML":l||(l="http://www.w3.org/1999/xhtml"),a!=null){for(s=0;s<a.length;s++)if((f=a[s])&&"setAttribute"in f==!!v&&(v?f.localName==v:f.nodeType==3)){e=f,a[s]=null;break}}if(e==null){if(v==null)return document.createTextNode(h);e=document.createElementNS(l,v,h.is&&h),i&&(b.__m&&b.__m(t,a),i=!1),a=null}if(v==null)g===h||i&&e.data==h||(e.data=h);else{if(a=a&&O.call(e.childNodes),g=r.props||B,!i&&a!=null)for(g={},s=0;s<e.attributes.length;s++)g[(f=e.attributes[s]).name]=f.value;for(s in g)if(f=g[s],s!="children"){if(s=="dangerouslySetInnerHTML")o=f;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;V(e,s,null,f,l)}}for(s in h)f=h[s],s=="children"?d=f:s=="dangerouslySetInnerHTML"?p=f:s=="value"?k=f:s=="checked"?m=f:i&&typeof f!="function"||g[s]===f||V(e,s,f,g[s],l);if(p)i||o&&(p.__html==o.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(o&&(e.innerHTML=""),xe(t.type=="template"?e.content:e,J(d)?d:[d],t,r,n,v=="foreignObject"?"http://www.w3.org/1999/xhtml":l,a,u,a?a[0]:r.__k&&Y(r,0),i,c),a!=null)for(s=a.length;s--;)ae(a[s]);i||(s="value",v=="progress"&&k==null?e.removeAttribute("value"):k!=null&&(k!==e[s]||v=="progress"&&!k||v=="option"&&k!=g[s])&&V(e,s,k,g[s],l),s="checked",m!=null&&m!=e[s]&&V(e,s,m,g[s],l))}return e}function oe(e,t,r){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&t==null||(e.__u=e(t))}else e.current=t}catch(l){b.__e(l,r)}}function Ce(e,t,r){var n,l;if(b.unmount&&b.unmount(e),(n=e.ref)&&(n.current&&n.current!=e.__e||oe(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(a){b.__e(a,t)}n.base=n.__P=null}if(n=e.__k)for(l=0;l<n.length;l++)n[l]&&Ce(n[l],t,r||typeof e.type!="function");r||ae(e.__e),e.__c=e.__=e.__e=void 0}function nt(e,t,r){return this.constructor(e,r)}function ie(e,t,r){var n,l,a,u;t==document&&(t=document.documentElement),b.__&&b.__(e,t),l=(n=typeof r=="function")?null:r&&r.__k||t.__k,a=[],u=[],le(t,e=(!n&&r||t).__k=Ze(T,null,[e]),l||B,B,t.namespaceURI,!n&&r?[r]:l?null:t.firstChild?O.call(t.childNodes):null,a,!n&&r?r:l?l.__e:t.firstChild,n,u),we(a,e,u)}O=ke.slice,b={__e:function(e,t,r,n){for(var l,a,u;t=t.__;)if((l=t.__c)&&!l.__)try{if((a=l.constructor)&&a.getDerivedStateFromError!=null&&(l.setState(a.getDerivedStateFromError(e)),u=l.__d),l.componentDidCatch!=null&&(l.componentDidCatch(e,n||{}),u=l.__d),u)return l.__E=l}catch(i){e=i}throw e}},he=0,Je=function(e){return e!=null&&e.constructor==null},W.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=F({},this.state),typeof e=="function"&&(e=e(F({},r),this.props)),e&&F(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),_e(this))},W.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),_e(this))},W.prototype.render=T,U=[],me=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ve=function(e,t){return e.__v.__b-t.__v.__b},q.__r=0,ge=/(PointerCapture)$|Capture$/i,re=0,te=fe(!1),ne=fe(!0),Ge=0;var rt=0,It=Array.isArray;function _(e,t,r,n,l,a){t||(t={});var u,i,c=t;if("ref"in c)for(i in c={},t)i=="ref"?u=t[i]:c[i]=t[i];var s={type:e,props:c,key:r,ref:u,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--rt,__i:-1,__u:0,__source:l,__self:a};if(typeof e=="function"&&(u=e.defaultProps))for(i in u)c[i]===void 0&&(c[i]=u[i]);return b.vnode&&b.vnode(s),s}var R,x,ue,Se,K=0,Fe=[],y=b,je=y.__b,Ee=y.__r,Te=y.diffed,Ae=y.__c,Pe=y.unmount,He=y.__;function ce(e,t){y.__h&&y.__h(x,e,K||t),K=0;var r=x.__H||(x.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({}),r.__[e]}function S(e){return K=1,at(De,e)}function at(e,t,r){var n=ce(R++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):De(void 0,t),function(i){var c=n.__N?n.__N[0]:n.__[0],s=n.t(c,i);c!==s&&(n.__N=[s,n.__[1]],n.__c.setState({}))}],n.__c=x,!x.__f)){var l=function(i,c,s){if(!n.__c.__H)return!0;var p=n.__c.__H.__.filter(function(d){return!!d.__c});if(p.every(function(d){return!d.__N}))return!a||a.call(this,i,c,s);var o=n.__c.props!==i;return p.forEach(function(d){if(d.__N){var f=d.__[0];d.__=d.__N,d.__N=void 0,f!==d.__[0]&&(o=!0)}}),a&&a.call(this,i,c,s)||o};x.__f=!0;var a=x.shouldComponentUpdate,u=x.componentWillUpdate;x.componentWillUpdate=function(i,c,s){if(this.__e){var p=a;a=void 0,l(i,c,s),a=p}u&&u.call(this,i,c,s)},x.shouldComponentUpdate=l}return n.__N||n.__}function P(e,t){var r=ce(R++,3);!y.__s&&Le(r.__H,t)&&(r.__=e,r.u=t,x.__H.__h.push(r))}function ze(e){return K=5,lt(function(){return{current:e}},[])}function lt(e,t){var r=ce(R++,7);return Le(r.__H,t)&&(r.__=e(),r.__H=t,r.__h=e),r.__}function ot(){for(var e;e=Fe.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(G),e.__H.__h.forEach(se),e.__H.__h=[]}catch(t){e.__H.__h=[],y.__e(t,e.__v)}}y.__b=function(e){x=null,je&&je(e)},y.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),He&&He(e,t)},y.__r=function(e){Ee&&Ee(e),R=0;var t=(x=e.__c).__H;t&&(ue===x?(t.__h=[],x.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(t.__h.forEach(G),t.__h.forEach(se),t.__h=[],R=0)),ue=x},y.diffed=function(e){Te&&Te(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Fe.push(t)!==1&&Se===y.requestAnimationFrame||((Se=y.requestAnimationFrame)||it)(ot)),t.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),ue=x=null},y.__c=function(e,t){t.some(function(r){try{r.__h.forEach(G),r.__h=r.__h.filter(function(n){return!n.__||se(n)})}catch(n){t.some(function(l){l.__h&&(l.__h=[])}),t=[],y.__e(n,r.__v)}}),Ae&&Ae(e,t)},y.unmount=function(e){Pe&&Pe(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{G(n)}catch(l){t=l}}),r.__H=void 0,t&&y.__e(t,r.__v))};var Me=typeof requestAnimationFrame=="function";function it(e){var t,r=function(){clearTimeout(n),Me&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,35);Me&&(t=requestAnimationFrame(r))}function G(e){var t=x,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),x=t}function se(e){var t=x;e.__c=e.__(),x=t}function Le(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function De(e,t){return typeof t=="function"?t(e):t}var Q={},ut={layout:"row",visible:!0},C=(e,t,r={})=>{Q[e]={...ut,...r,component:t}},Be=e=>e in Q?!0:(console.warn(`control of type "${e}" is requested but not registered`),!1),st=e=>{if(!Be(e.type))return;let{component:t,...r}=Q[e.type];return r},ct=e=>{if(!Be(e.type))return;let{component:t,...r}=Q[e.type];return t},pt=({nodes:e,treeNode:t,update:r})=>{let n=e[t.id];return _("button",{type:"button",onClick:()=>r({[n.id]:{value:!0}},{event:!0}),children:n.text??n.id})};C("button",pt,{label:null});var Ie=e=>e.trim()==="",Ue=e=>isFinite(e),_t=(e,t)=>String(e)!==t,dt=(e,t,r)=>e>=t&&e<=r,ft=(e,t,r)=>Math.min(Math.max(e,t),r),Z=({value:e,min:t=-1/0,max:r=1/0,commit:n})=>{let[l,a]=S(String(e)),[u,i]=S(e);P(()=>{a(String(e)),i(e)},[e]);function c(p){let o=String(p);if(a(o),Ie(o))return;let d=Number(o);!Ue(d)||!dt(d,t,r)||_t(d,o)||(i(d),n(d))}function s(){if(Ie(l)||!Ue(Number(l))){a(String(u));return}let p=Number(l),o=ft(p,t,r);a(String(o)),i(o),n(o)}return{value:e,text:l,setValue:c,handleBlur:s}},ee=e=>Array.isArray(e)&&e.every(t=>t!=null&&typeof t=="object"&&!Array.isArray(t)&&"label"in t&&"value"in t)?e:Array.isArray(e)?e.map(t=>({label:String(t),value:t})):e&&typeof e=="object"?Object.entries(e).map(([t,r])=>({label:t,value:r})):[],ht=({nodes:e,treeNode:t,update:r})=>{let n=e[t.id],l=ee(n.options).map(({label:a,value:u},i)=>{let c=n.value===u?"knurl-selected":"";return _("button",{onClick:()=>r({[n.id]:{value:u}}),className:`${c}`,type:"button",children:a},a)});return _("div",{className:"knurl-buttons",children:l})};C("buttons",ht,{value:e=>ee(e.options)[0]?.value});var mt=e=>"#ffffff",vt=({nodes:e,treeNode:t,update:r})=>{let n=e[t.id],[l,a]=S(n.value),[u,i]=S(n.value);P(()=>{a(n.value)},[n.value]);let c=o=>o.startsWith("#")&&o.length===7&&CSS.supports("color",o),s=o=>{let d=o.currentTarget.value,f=c(d)?d:u;r({[n.id]:{value:f}}),a(f)},p=o=>{let d=o.currentTarget.value;c(d)&&(r({[n.id]:{value:d}}),i(d))};return _(T,{children:[_("input",{type:"color",value:l,onInput:p,className:"knurl-color-picker"}),_("input",{type:"text",className:"knurl-fixed",size:"7",value:l,onInput:p,onChange:s})]})};C("color",vt,{value:mt});var gt=({nodes:e,treeNode:t,update:r})=>{let n=e[t.id];switch(n.format){case"monospace":return _("span",{className:"knurl-display knurl-monospace",children:n.value});case"block":return _("pre",{className:"knurl-display knurl-monospace",children:n.value});case"html":return _("span",{className:"knurl-display",dangerouslySetInnerHTML:{__html:n.value??""}});default:return _("span",{className:"knurl-display",children:n.value})}};C("display",gt,{value:"",format:"text"});var kt=({nodes:e,treeNode:t,update:r})=>{let n=e[t.id],l=ze(null),[a,u]=S(Array(n.samples).fill(0)),[i,c]=S({min:null,max:null});return P(()=>{u(s=>[...s,n.value].slice(-n.samples)),c(s=>({min:s.min===null?n.value:Math.min(s.min,n.value),max:s.max===null?n.value:Math.max(s.max,n.value)}))},[n]),P(()=>{let s=l.current;if(!s)return;let p=s.getContext("2d"),o=s.getBoundingClientRect(),d=window.devicePixelRatio||1,f=o.width,k=n.height;s.width=f*d,s.height=k*d,p.scale(d,d),s.style.width=f+"px",s.style.height=k+"px",p.clearRect(0,0,f,k);let m=s.closest(".knurl"),g=getComputedStyle(m).getPropertyValue("--panel-fg").trim()||"#aaa",h=n.min??i.min??0,v=n.max??i.max??1,w=v-h||1,N=1/(n.samples-1)*f;p.fillStyle=g,p.globalAlpha=.5,p.beginPath(),p.moveTo(0,k),a.forEach((j,A)=>{let z=(j-h)/w*k,L=A*N,M=k-z;p.lineTo(L,M)}),p.lineTo(f,k),p.fill(),p.globalAlpha=1,p.font="10px ui-monospace, monospace",p.textBaseline="top",p.textAlign="left",p.fillText(v,3,0),p.textBaseline="bottom",p.fillText(h,3,k)},[a,i,n]),_("canvas",{className:"knurl-graph",ref:l,height:n.height})};C("graph",kt,{height:60,samples:60});var Re=({nodes:e,treeNode:t,update:r})=>{let n=e[t.id];if(!n.visible)return null;let l=ct(n);if(!l)return null;let a=_(l,{nodes:e,treeNode:t,update:r});if(n.layout==="block")return a;let u=!(n.label===""||n.label===null);return _("div",{className:"knurl-row",role:"group","aria-label":n.label??n.id,children:[u&&_("span",{className:"knurl-label",children:n.label??n.id}),_("div",{className:"knurl-control",children:a})]})},bt=({nodes:e,treeNode:t,update:r})=>{let n=e[t.id],l=t.nodes.map((c,s)=>_(Re,{nodes:e,treeNode:c,update:r},c.id)),a=n.expanded?"knurl-expanded":"knurl-collapsed",u=n.showLabel?"knurl-show-label":"knurl-hide-label",i=!(n.label===""||n.label===null);return _("div",{className:`knurl-group ${a} ${u}`,children:[i&&_("span",{className:"knurl-label",onClick:()=>{n.expandable&&r({[n.id]:{expanded:!n.expanded}})},children:[n.expandable&&_("span",{className:"knurl-icon",children:"\u2303"}),n.label??n.id]}),_("div",{className:"knurl-group-container",children:l})]})};C("group",bt,{layout:"block",expandable:!0,expanded:!0});var xt=({nodes:e,treeNode:t,update:r})=>{let n=e[t.id],{text:l,setValue:a,handleBlur:u}=Z({value:n.value,min:n.min,max:n.max,commit:i=>r({[n.id]:{value:i}})});return _("input",{className:"knurl-number-input",type:"text",value:l,onInput:i=>a(i.currentTarget.value),onChange:u})};C("number",xt,{value:()=>0});var Ye=(e,t)=>{let r=1/t;return Math.round(e*r)/r},yt=({nodes:e,treeNode:t,update:r})=>{let n=e[t.id],{x:l,y:a}=n.value,[u,i]=S(!1),[c,s]=S(null),[p,o]=S({height:176,width:176,space:6,radius:2});P(()=>{let m=document.querySelector(".knurl");if(!m)return;let g=getComputedStyle(m),h=g.getPropertyValue("--panel-width"),v=g.getPropertyValue("--label-width"),w=g.getPropertyValue("--panel-radius"),N=g.getPropertyValue("--panel-space"),j=parseFloat(h)-parseFloat(v)-2*parseFloat(N),A=parseFloat(w),z=parseFloat(N);o({width:j,height:j,radius:A,space:z})},[]);let d=Z({value:n.value.x,min:n.minX,max:n.maxX,commit:m=>r({[n.id]:{value:{...n.value,x:m}}})}),f=Z({value:n.value.y,min:n.minY,max:n.maxY,commit:m=>r({[n.id]:{value:{...n.value,y:m}}})});P(()=>{if(!u||!c)return;let m=document.body.style.cursor;document.body.style.cursor="grabbing";let g=w=>{let N=w.clientX??w.touches?.[0]?.clientX,j=w.clientY??w.touches?.[0]?.clientY;if(N===void 0||j===void 0)return;let A=N-c.pointerX,z=j-c.pointerY,L=c.valueX+A*n.scale,M=c.valueY+z*n.scale,X=Math.max(n.minX,Math.min(n.maxX,L)),E=Math.max(n.minY,Math.min(n.maxY,M)),I=Ye(X,n.step),Oe=Ye(E,n.step);r({[n.id]:{value:{x:I,y:Oe}}})},h=()=>{i(!1),s(null)},v=w=>(w.preventDefault(),!1);return document.addEventListener("mousemove",g),document.addEventListener("mouseup",h),document.addEventListener("touchmove",g,{passive:!1}),document.addEventListener("touchend",h),()=>{document.body.style.cursor=m,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",g),document.removeEventListener("touchend",h)}},[u,c,n]);let k=(m,g=null)=>{let h=m.clientX??m.touches?.[0]?.clientX,v=m.clientY??m.touches?.[0]?.clientY;i(!0),s({pointerX:h,pointerY:v,valueX:g?.x??n.value.x,valueY:g?.y??n.value.y})};return _(T,{children:[_("button",{onMouseDown:m=>{m.preventDefault(),k(m)},onTouchStart:m=>{m.preventDefault(),k(m)},className:`knurl-translate ${u?"knurl-selected":""}`,type:"button",style:{touchAction:"none",userSelect:"none"},children:"\u2316"}),_("input",{className:"knurl-number-input knurl-fixed",type:"text",size:"7",value:d.text,onInput:m=>d.setValue(m.currentTarget.value),onChange:d.handleBlur}),_("input",{className:"knurl-number-input knurl-fixed",type:"text",size:"7",value:f.text,onInput:m=>f.setValue(m.currentTarget.value),onChange:f.handleBlur}),u&&_("div",{className:"knurl-pad2",children:_("svg",{width:p.width,height:p.height,style:{position:"absolute",top:0,left:0,borderRadius:p.radius},children:[_("rect",{width:p.width,height:p.height,fill:"transparent",className:"knurl-border",rx:p.radius}),_("line",{x1:p.width/2,y1:0,x2:p.width/2,y2:p.height,className:"knurl-grid"}),_("line",{x1:0,y1:p.height/2,x2:p.width,y2:p.height/2,className:"knurl-grid"}),_("text",{x:p.space,y:p.space,className:"knurl-label","dominant-baseline":"hanging","font-size":"10",children:[n.minX,",",n.minY]}),_("text",{x:p.width-p.space,y:p.space,"dominant-baseline":"hanging",className:"knurl-label","font-size":"10","text-anchor":"end",children:[n.maxX,",",n.minY]}),_("text",{x:p.space,y:p.height-p.space,className:"knurl-label","font-size":"10",children:[n.minX,",",n.maxY]}),_("text",{x:p.width-p.space,y:p.height-p.space,className:"knurl-label","font-size":"10","text-anchor":"end",children:[n.maxX,",",n.maxY]}),_("circle",{cx:(l-n.minX)/(n.maxX-n.minX)*p.width,cy:(a-n.minY)/(n.maxY-n.minY)*p.height,r:6,className:"knurl-indicator"})]})})]})};C("pad2",yt,{value:e=>({x:e.minX+(e.maxX-e.minX)*.5,y:e.minY+(e.maxY-e.minY)*.5}),scale:.01,step:.01,minX:-1,maxX:1,minY:-1,maxY:1});var wt=({nodes:e,treeNode:t,update:r})=>{let n=e[t.id],{text:l,setValue:a,handleBlur:u}=Z({value:n.value,min:n.min,max:n.max,commit:i=>r({[n.id]:{value:i}})});return _(T,{children:[_("input",{type:"range",value:l,min:n.min,max:n.max,step:n.step??1,onInput:i=>a(i.currentTarget.value)}),_("input",{type:"text",size:"7",className:"knurl-number-input knurl-fixed",value:l,onInput:i=>a(i.currentTarget.value),onChange:u})]})};C("range",wt,{value:e=>e.min??0});var Nt=({nodes:e,treeNode:t,update:r})=>{let n=e[t.id],l=ee(n.options),a=c=>{let s=Number(c.currentTarget.value),p=l[s].value;r({[n.id]:{value:p}})},u=l.map(({label:c},s)=>_("option",{value:s,children:c},c)),i=l.findIndex(({value:c})=>c===n.value);return _("select",{value:i<0?"":i,onChange:a,children:u})};C("select",Nt,{value:e=>ee(e.options)[0]?.value});var Ct=({nodes:e,treeNode:t,update:r})=>{let n=e[t.id],l=a=>{r({[n.id]:{value:a.currentTarget.value}})};return n.multiline?_("textarea",{value:n.value,onInput:l,rows:n.rows}):_("input",{type:"text",value:n.value,onInput:l})};C("text",Ct,{value:"",multiline:!1,rows:4});var St=({nodes:e,treeNode:t,update:r})=>{let n=e[t.id];return _("input",{type:"checkbox",checked:n.value,onInput:l=>r({[n.id]:{value:l.currentTarget.checked}})})};C("toggle",St,{value:e=>!1});var jt='.knurl-container{position:fixed;top:0;right:0}.knurl{--panel-bg: hsl(230 7% 10%);--panel-fg: hsl(230 10% 75%);--panel-border: hsl(230 9% 18%);--panel-hover: hsl(230 9% 26%);--panel-pressed: hsl(230 7% 16%);--panel-low-emphasis: hsl(230 4% 55%);--panel-focus: var(--panel-fg);--panel-selection-fg: var(--panel-bg);--panel-selection-bg: var(--panel-fg);--value-number: hsl(220 80% 65%);--value-string: hsl(139 45% 56%);--panel-space: 4px;--panel-radius: 2px;--panel-width: 256px;--label-width: 80px;--row-height: 20px;--font-ui: system-ui, -apple-system, sans-serif;--font-value: ui-monospace, monospace;--font-size-normal: 11px;--line-height-normal: 1.4;--color-link: var(--value-number);--panel-tween-func: cubic-bezier(.25, .8, .5, 1);--panel-tween-duration: .2s;--checkbox-check-width: 3px;--checkbox-check-height: 9px;width:var(--panel-width);color:var(--panel-fg);font-family:var(--font-ui);font-size:var(--font-size-normal);line-height:var(--line-height-normal);box-sizing:border-box;font-variant-numeric:tabular-nums}.knurl .knurl-row{display:flex;flex-direction:row;gap:var(--panel-space);padding:var(--panel-space) var(--panel-space)}.knurl .knurl-row+.knurl-row{padding-top:calc(var(--panel-space) * .5)}.knurl .knurl-row:has(+.knurl-row){padding-bottom:calc(var(--panel-space) * .5)}.knurl .knurl-group-container .knurl-group-container{border-bottom:1px solid var(--panel-border)}.knurl .knurl-row .knurl-label{display:flex;align-self:flex-start;align-items:center;line-height:1.2;min-height:20px;min-width:0;user-select:none;color:var(--panel-low-emphasis);flex:0 0 var(--label-width)}.knurl .knurl-group{display:flex;flex-direction:column;background:var(--panel-bg);border-radius:var(--panel-radius)}.knurl-container>.knurl>.knurl-group>.knurl-label{border-radius:0 0 var(--panel-radius) var(--panel-radius)}.knurl .knurl-group>.knurl-label{display:flex;align-items:center;user-select:none;background:var(--panel-border);border-radius:var(--panel-radius);height:var(--row-height);padding-left:var(--panel-space);gap:var(--panel-space)}.knurl .knurl-group>.knurl-label:has(>.knurl-icon){cursor:pointer}.knurl .knurl-group>.knurl-label>.knurl-icon{font-weight:700;font-size:10px;cursor:pointer}@media (prefers-reduced-motion: no-preference){.knurl .knurl-group>.knurl-label>.knurl-icon{transition:transform var(--panel-tween-duration) var(--panel-tween-func)}}.knurl .knurl-group.knurl-expanded>.knurl-label>.knurl-icon{transform:rotate(180deg)}.knurl .knurl-group>.knurl-group-container{flex-direction:column;overflow:hidden;display:none}.knurl .knurl-group.knurl-expanded>.knurl-group-container{display:flex}@supports (interpolate-size: allow-keywords){.knurl .knurl-group>.knurl-group-container{display:flex;interpolate-size:allow-keywords;height:0;opacity:0}@media (prefers-reduced-motion: no-preference){.knurl .knurl-group>.knurl-group-container{transition:height var(--panel-tween-duration) var(--panel-tween-func),padding var(--panel-tween-duration) var(--panel-tween-func),opacity var(--panel-tween-duration) var(--panel-tween-func)}}.knurl .knurl-group.knurl-expanded>.knurl-group-container{height:auto;opacity:1}}.knurl-container>.knurl{border-radius:0 0 var(--panel-radius) var(--panel-radius)}.knurl .knurl-row .knurl-control{flex:1 1 auto;display:flex;justify-content:flex-start;align-items:center;min-height:var(--row-height);gap:var(--panel-space)}.knurl button,.knurl input,.knurl select,.knurl textarea{font-size:inherit;font-family:inherit;width:100%;box-sizing:border-box;border:1px solid transparent;padding:0 var(--panel-space);border-radius:var(--panel-radius);background:var(--panel-border);color:var(--panel-fg)}.knurl button,.knurl select,.knurl input[type=text],.knurl input[type=range]{min-height:var(--row-height)}.knurl input[type=color]{height:var(--row-height)}.knurl button,.knurl select,.knurl input[type=checkbox],.knurl input[type=range],.knurl input[type=color]{cursor:pointer}.knurl input[type=text],.knurl textarea{cursor:text}.knurl button:focus-visible,.knurl select:focus-visible,.knurl input:focus-visible,.knurl textarea:focus-visible{outline:2px solid var(--panel-focus);outline-offset:0px}.knurl button:focus:not(:focus-visible),.knurl select:focus:not(:focus-visible),.knurl input:focus:not(:focus-visible),.knurl textarea:focus:not(:focus-visible){outline:none}.knurl button:hover:not(:active):not(.knurl-selected),.knurl input:hover,.knurl select:hover,.knurl textarea:hover{background:var(--panel-hover)}.knurl button:active,.knurl button.knurl-selected{background:var(--panel-fg);color:var(--panel-bg);border-radius:var(--panel-radius)}.knurl input::selection,.knurl textarea::selection{background:var(--panel-selection-bg);color:var(--panel-selection-fg)}.knurl textarea{resize:vertical;min-height:calc(var(--row-height) * 2 + var(--panel-space));line-height:var(--line-height-normal);color:var(--value-string);font-family:var(--font-value)}.knurl .knurl-buttons{display:flex;flex-direction:row;flex:1;gap:var(--panel-space)}.knurl .knurl-pad2{position:absolute;align-self:flex-start;margin-top:calc(var(--row-height) + var(--panel-space));width:calc(var(--panel-width) - var(--label-width) - 2 * var(--panel-space));height:calc(var(--panel-width) - var(--label-width) - 2 * var(--panel-space));background:var(--panel-bg);z-index:1001}.knurl .knurl-pad2 .knurl-border,.knurl .knurl-pad2 .knurl-grid{stroke:var(--panel-fg);stroke-opacity:.25}.knurl .knurl-pad2 .knurl-label{fill:var(--panel-fg);opacity:.5}.knurl .knurl-pad2 .knurl-indicator{fill:var(--panel-fg)}.knurl button.knurl-translate{font-weight:bolder}.knurl button.knurl-translate.knurl-selected{cursor:grabbing}.knurl input[type=text]{color:var(--value-string);font-family:var(--font-value)}.knurl input[type=text].knurl-number-input{color:var(--value-number)}.knurl input[type=number]::-webkit-inner-spin-button,.knurl input[type=number]::-webkit-outer-spin-button{appearance:none;margin:0}.knurl input[type=text].knurl-fixed{width:60px}.knurl .knurl-control>.knurl-display{line-height:var(--row-height)}.knurl .knurl-control>.knurl-display.knurl-monospace{font-family:var(--font-value)}.knurl .knurl-display a{color:var(--color-link);text-decoration:underline}.knurl .knurl-display a:hover{text-decoration:none}.knurl pre.knurl-display{margin:0}.knurl input[type=checkbox]{margin:0;appearance:none;border-radius:var(--panel-radius);width:14px;height:14px;text-align:center}.knurl input[type=checkbox]:checked:before{content:"";display:flex;height:var(--checkbox-check-height);width:var(--checkbox-check-width);border-bottom:2px solid var(--panel-fg);border-right:2px solid var(--panel-fg);transform:rotate(45deg)}.knurl input[type=range]{-webkit-appearance:none;appearance:none;background:transparent;margin:0;padding:0}.knurl input[type=range]::-webkit-slider-runnable-track{background:var(--panel-border);height:3px;border-radius:2px;margin:0 -1px}.knurl input[type=range]::-moz-range-track{background:var(--panel-border);height:3px;border-radius:2px;margin:0 -1px}.knurl input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;border-radius:var(--panel-radius);background:var(--panel-fg);margin-top:-4px}.knurl input[type=range]::-moz-range-thumb{width:12px;height:12px;border-radius:var(--panel-radius);background:var(--panel-fg);border:none}.knurl input[type=color]{-webkit-appearance:none;border:1px solid var(--panel-border);padding:0;border-radius:var(--panel-radius);height:var(--row-height)}.knurl input[type=color]::-webkit-color-swatch-wrapper{padding:0}.knurl input[type=color]::-webkit-color-swatch{border:0}.knurl canvas.knurl-graph{width:100%}',Et=0,Tt=e=>`node ${Et++}`,Ve=e=>{let{id:t=Tt(),nodes:r=[],...n}=e,l={},a={id:t,nodes:[]},u={id:t},i=st(e);for(let c in i)typeof i[c]=="function"?u[c]=i[c]({...i,...e}):u[c]=i[c];return Object.assign(u,n),l[t]=u,r.length>0&&r.forEach(c=>{let[s,p]=Ve(c);Object.assign(l,s),a.nodes.push(p)}),[l,a]},At=()=>{let e=document.createElement("div");return e.classList.add("knurl-container"),document.body.append(e),e},Pt=()=>{if(!document.querySelector("style[data-knurl]")){let e=document.createElement("style");e.textContent=jt,e.setAttribute("data-knurl","true"),document.head.appendChild(e)}},Xe=Symbol("all"),Ht=class{constructor(e,t){let[r,n]=Ve(e);this.nodes=r,this.root=n,this.container=t.mount??At(),this.options=t,this.subscribers=new Map,this.raf=null,t.injectStyles&&Pt(),this.render()}render(){let e=()=>{ie(_("div",{className:`knurl ${this.options.classNames.join(" ")}`,children:_(Re,{nodes:this.nodes,treeNode:this.root,update:this.handleUpdate.bind(this)})}),this.container)};if(!this.options.throttleRendering){e();return}this.options.throttleRendering&&!this.raf&&(this.raf=requestAnimationFrame(()=>{e(),this.raf=null}))}handleUpdate(e,{silent:t=!1,event:r=!1}={}){if(typeof e!="object"){console.warn("could not set values: invalid values object");return}for(let n in e){let l=this.nodes[n];if(!l)continue;let a=e[n];r||(this.nodes[n]={...l,...a}),"value"in a&&!t&&this.notifySubscribers(n,e[n].value)}this.render()}notifySubscribers(e,t){this.subscribers.get(e)?.forEach(r=>r(t)),this.subscribers.get(Xe)?.forEach(r=>r(e,t))}subscribe(e,t){let r=typeof e=="string"?e:Xe,n=typeof t=="function"?t:typeof e=="function"?e:void 0;if(n===void 0){console.warn("could not subscribe: no handler");return}return this.subscribers.has(r)||this.subscribers.set(r,[]),this.subscribers.get(r).push(n),()=>{let l=this.subscribers.get(r),a=l.indexOf(n);a>-1?l.splice(a,1):console.warn("could not unsubscribe: could not find handler")}}set(e,t){let r={};for(let n in e)r[n]={value:e[n]};this.handleUpdate(r,t)}update(e,t){this.handleUpdate(e,{...t,event:!1})}get(){let e={};for(let t in this.nodes){let r=this.nodes[t]?.value;r!==void 0&&(e[t]=r)}return e}destroy(){this.raf&&cancelAnimationFrame(this.raf),ie(null,this.container),this.options.mount||this.container.remove(),this.subscribers.clear(),this.values={}}},$e={create(e,t={}){let r=Array.isArray(e)?{type:"group",label:"controls",nodes:e}:e,n=new Ht(r,{throttleRendering:!0,injectStyles:!0,classNames:[],...t});return{subscribe:n.subscribe.bind(n),update:n.update.bind(n),set:n.set.bind(n),get:n.get.bind(n),destroy:n.destroy.bind(n)}}};var Mt=[129414,129326,128169,128584,129445,129441,129448,129453,129742,129743,129727,128009,129440,129484,129503,129535,129712,129714,129715,129713,129767,129753,128511,127755,128760,129668,128371,129702,129703,129687,129688,129689,129697,129698,129699,129667,129680,129768,129760,129396,129765,129744],Ft=({nodes:e,treeNode:t,update:r})=>{let n=e[t.id],l=Mt.map(a=>{let u=n.value===a,i=String.fromCodePoint(a);return _("button",{type:"button",onClick:()=>r({[n.id]:{value:a}}),className:u?"selected":"",children:i},i)});return _("div",{className:"emoji-palette",children:l})};C("emoji-palette",Ft,{value:()=>129414,label:null});var zt=$e.create({type:"group",id:"emoji picker",nodes:[{id:"emoji",type:"emoji-palette"}]}),H=document.createElement("canvas"),D=H.getContext("2d");document.getElementById("canvas-container").append(H);var We=()=>{H.width=window.innerWidth,H.height=window.innerHeight},qe=(e=[])=>{D.clearRect(0,0,H.width,H.height);let{emoji:t}=zt.get(),r=String.fromCodePoint(t),n=[];for(let a=0;a<5;a++)n.push({x:Math.random()*H.width,y:Math.random()*H.height-H.height,velocity:Math.random()*5+5,emoji:r});D.font="48px serif",D.textAlign="center",D.textBaseline="middle";let l=[...e,...n].map(a=>({...a,y:a.y+a.velocity})).filter(a=>a.y>=H.height+48?!1:(D.save(),D.translate(a.x,a.y),D.fillText(a.emoji,0,0),D.restore(),!0));requestAnimationFrame(()=>qe(l))};window.addEventListener("resize",We);We();qe();
